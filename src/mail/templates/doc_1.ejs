<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= document.type?.label || 'Document' %></title>
</head>

<body style="margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f4f4f4;">
  <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="background-color: #f4f4f4;">
    <tr>
      <td align="center" style="padding: 40px 0;">
        <table role="presentation" width="600" cellspacing="0" cellpadding="0" border="0" style="background-color: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">

          <!-- Header -->
          <tr>
            <td style="padding: 30px 40px;">
              <table width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                  <!-- <td width="50%">
                    <div style="background-color: #1a2332; color: #ffffff; padding: 20px; font-size: 18px; font-weight: bold; text-align: center;">
                      LOGO
                    </div>
                  </td> -->
                  <td width="50%" align="right" valign="top">
                    <div style="font-size: 11px; line-height: 1.5; color: #000000;">
                      <strong><%= document.type?.label || 'Document' %></strong><br>
                      <%= document.code %><br>
                      <%= formatDate(new Date()) %>
                    </div>
                  </td>
                </tr>
              </table>
            </td>
          </tr>

          <!-- Company Info -->
          <tr>
            <td style="padding: 0 40px 20px 40px;">
              <div style="font-size: 13px; line-height: 1.6; color: #333333;">
                <strong><%= document.company?.name || '---' %></strong><br>
                Adresse, <%= formatAdrress(document.company?.headOffice) %><br>
                <!-- Téléphone <%= document.company?.phone || '---' %><br> -->
                <!-- Email<%= document.company?.email || '---' %> -->
              </div>
            </td>
          </tr>

          <!-- Addresses -->
          <tr>
            <td style="padding: 0 40px 30px 40px;">
              <table width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                  <td width="48%" valign="top" style="background-color: #f8f9fa; padding: 15px; border-radius: 4px; border-width: 1em;; border-color: #ffb4b4;">
                    <div style="font-size: 12px; color: #333333;">
                      <strong style="display: block; margin-bottom: 8px;">Adresse de facturation</strong>
                      <%= formatAdrress(document.billingAddress) %>
                    </div>
                  </td>
                  <td width="4%"></td>
                  <td width="48%" valign="top" style="background-color: #f8f9fa; padding: 15px; border-radius: 4px;">
                    <div style="font-size: 12px; color: #333333;">
                      <strong style="display: block; margin-bottom: 8px;">Adresse de chantier</strong>
                      <%= formatAdrress(document.workAddress) %>
                    </div>
                  </td>
                </tr>
              </table>
            </td>
          </tr>

          <tr>
            <td style="padding: 0 40px 30px 40px;">
              <table width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                  <td width="100%" valign="top" style="background-color: #f8f9fa; padding: 15px; border-radius: 4px;">
                    <div style="font-size: 13px; line-height: 1.6; color: #333333;">
                      <strong>Client: <%= document.customer?.code || '---' %></strong><br>
                      <%= getCustomerName(document.customer) %><br>
                    </div>
                  </td>
                  <td width="4%"></td>
                </tr>
              </table>
            </td>
          </tr>

          <!-- Items Table -->
          <tr>
            <td style="padding: 0 40px 30px 40px; ">
              <table width="100%" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse;">
                <thead style="background-color: #f8f9fa;">
                  <tr>
                    <th align="left" style="padding: 14px 8px;  font-size: 13px; font-weight: bold; color: #333333;">
                      Désignation
                    </th>
                    <th align="right" style="padding: 14px 8px;  font-size: 13px; font-weight: bold; color: #333333;">
                      Total HT (€)
                    </th>
                  </tr>
                </thead>
                <tbody style="background-color: #f8f9fa;">
                  <%- include('item_1', { items: document.items, formatCurrency: formatCurrency }) %>
                </tbody>
              </table>
            </td>
          </tr>

          <!-- Totals -->
          <tr>
            <td style="padding: 0 40px 40px 40px;">
              <table width="100%" cellspacing="0" cellpadding="0" border="0">
                <tr>
                  <td width="60%"></td>
                  <td width="40%">
                    <table width="100%" cellspacing="0" cellpadding="0" border="0">
                      <tr>
                        <td style="padding: 8px 0; font-size: 13px; color: #666666;">
                          Sous-total
                        </td>
                        <td align="right" style="padding: 8px 0; font-size: 13px; color: #666666;">
                          HT <%= formatCurrency(document.totalHT) %>
                        </td>
                      </tr>
                      <tr>
                        <td style="padding: 8px 0; font-size: 13px; color: #666666; border-bottom: 1px solid #e0e0e0;">
                          Net HT :
                        </td>
                        <td align="right" style="padding: 8px 0; font-size: 13px; color: #666666; border-bottom: 1px solid #e0e0e0;">
                          <%= formatCurrency(document.totalHT) %>
                        </td>
                      </tr>
                      <tr>
                        <td style="padding: 8px 0; font-size: 13px; color: #666666; border-bottom: 2px solid #333333;">
                          TVA <%= +document.tvaRate?.rate %>% :
                        </td>
                        <td align="right" style="padding: 8px 0; font-size: 13px; color: #666666; border-bottom: 2px solid #333333;">
                          <%= formatCurrency(document.totalTVA) %>
                        </td>
                      </tr>
                      <tr>
                        <td style="padding: 12px 0 0 0; font-size: 16px; font-weight: bold; color: #333333;">
                          Total TTC :
                        </td>
                        <td align="right" style="padding: 12px 0 0 0; font-size: 16px; font-weight: bold; color: #2c3e50;">
                          <%= formatCurrency(document.totalTTC) %>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </td>
          </tr>

        </table>
      </td>
    </tr>
  </table>
</body>

</html>